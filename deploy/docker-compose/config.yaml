database:
  user: hanko
  password: hanko
  host: postgresd
  port: 5432
  dialect: postgres

email:
  enabled: true
  # optional: false
  # acquire_on_registration: true
  # acquire_on_login: false
  require_verification: false
  # limit: 5
  # use_as_login_identifier: true
  # max_length: 100
  # use_for_authentication: true
  passcode_ttl: 300
  max_num_of_addresses: 5

email_delivery:
  smtp:
    host: "mailslurper"
    port: "2500"
  from_address: noreply@hanko.io

secrets:
  keys:
    - abcedfghijklmnopqrstuvwxyz

service:
  name: ClinicOS Auth Service

webauthn:
  relying_party:
    origins:
      - "http://localhost:8888"
      - "http://localhost:7000"
      - "http://localhost:7001"
      - "http://localhost:7002"
      - "http://localhost:3000"
      - "http://localhost:5173"

# Session cookie configuration for local HTTP development
session:
  lifespan: 12h
  cookie:
    secure: false
    same_site: lax
    http_only: true

rate_limiter:
  enabled: true
  store: in_memory
  passcode_limits:
    tokens: 3
    interval: 1m
  password_limits:
    tokens: 5
    interval: 1m
  token_limits:
    tokens: 3
    interval: 1m

# username:
#   enabled: true
#   optional: true

# MFA configuration with device trust
mfa:
  enabled: true
  optional: true
  acquire_on_login: false
  acquire_on_registration: true
  device_trust_policy: "prompt"
  device_trust_duration: "5m"
  device_trust_cookie_name: "hanko-device-token"
  totp:
    enabled: true
  security_keys:
    enabled: false

server:
  public:
    address: "0.0.0.0:8000"
    cors:
      allow_origins:
        - "http://localhost:8888"
        - "http://localhost:7000"
        - "http://localhost:7001"
        - "http://localhost:7002"
        - "http://localhost:3000"
        - "http://localhost:5173"
      allow_credentials: true

security_notifications:
  notifications:
    email_create:
      enabled: true
    email_delete:
      enabled: true
    password_update:
      enabled: true
    passkey_create:
      enabled: true
    primary_email_update:
      enabled: true
    mfa_create:
      enabled: true
    mfa_delete:
      enabled: true

# Multi-tenant configuration
# Uncomment and configure to enable multi-tenant mode
# multi_tenant:
#   enabled: true                    # Enable multi-tenant mode (default: false)
#   tenant_header: "X-Tenant-ID"     # HTTP header for tenant ID (default: X-Tenant-ID)
#   allow_global_users: true         # Allow users without tenant - backward compatible (default: true)
#   auto_provision: true             # Auto-create tenant if ID doesn't exist (default: true)